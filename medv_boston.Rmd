---
title: "Predicting Median House Value in Boston"
author: "Seif H. Kungulio"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
description: "A comprehensive analysis to predict median house values in Boston suburbs using various machine learning techniques."
categories: [Data Science, Machine Learning, R]
tags: [Regression, Random Forest, Data Preparation, Model Evaluation]
output:
  pdf_document:
    toc: true
    number_sections: true
    highlight: espresso
    include:
      in_header: resources/header.tex
    latex_engine: xelatex
header-includes:
  # Font and color setup
  - \usepackage{xcolor}
  - \definecolor{brand}{HTML}{000000}
  - \definecolor{subbrand}{HTML}{212121}
  - \usepackage{titlesec}
  - \titleformat{\section}{\Large\bfseries\color{brand}}{\thesection}{1em}{}
  - \titleformat{\subsection}{\large\bfseries\color{subbrand}}{\thesubsection}{0.75em}{}
  - \usepackage[most]{tcolorbox}
  - \tcbset{colback=white, colframe=brand, coltitle=white, fonttitle=\bfseries}
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  - \fancyhead[L]{\textcolor{brand}{Predicting Median House Value in Boston}}
  - \fancyhead[R]{\textcolor{subbrand}{Seif H. Kungulio}}
  - \fancyfoot[C]{\thepage}
editor_options:
  chunk_output_type: console
---

```{r setup, include=FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.width=12, fig.height=6)

# Set default CRAN mirror
options(repos = c(CRAN = "https://cloud.r-project.org"))

#Install the following libraries if required
# List of required packages


required_pkgs <- c("tidyverse","skimr","GGally","caret","pROC","vip","xgboost",
                   "Matrix","pls","broom","janitor","car","yardstick","cowplot",
                   "ggrepel","patchwork","MASS", "e1071", "kableExtra")

# Install and load each package
for (pkg in required_pkgs) {
  if (!requireNamespace(pkg, quietly = TRUE)) {
    install.packages(pkg)
  }
  library(pkg, character.only = TRUE)
}

theme_set(theme_minimal(base_size = 12))
options(dplyr.summarise.inform = FALSE)
```

\newpage

# Business Understanding
## Introduction
The Boston housing market represents a complex interplay of social, economic, and environmental factors that directly affect property values. Understanding these dynamics is essential for informed decision-making in real estate, urban planning, and public policy.

This project seeks to analyze and predict the median value of owner-occupied homes (MEDV) in the Boston area using the Boston Housing Dataset from the MASS package in R. The dataset includes 506 observations and 14 attributes describing housing and neighborhood characteristics, such as per capita crime rate, average number of rooms, proximity to employment centers, and levels of air pollution.

Through the application of advanced analytical techniques—Multiple Linear Regression, Principal Component Regression (PCR), and XGBoost Regressor—the study aims to build accurate predictive models and identify the most influential variables that explain housing price variability. Following the CRISP-DM framework, the process encompasses business understanding, data exploration, data preparation, modeling, evaluation, and deployment phases.

## Objectives
The main objectives of this project are as follows:

* Primary Objective:
  To develop predictive models capable of estimating the median value of owner-occupied homes (MEDV) in Boston suburbs based on socioeconomic and environmental predictors.

* Secondary Objectives:
  * To identify key variables influencing housing prices in Boston.
  * To compare model performance between Multiple Linear Regression, Principal Component Regression, and XGBoost algorithms.
  * To provide actionable insights for urban planners, real estate investors, and housing authorities to guide data-driven decisions.
  * To demonstrate a reproducible, end-to-end analytical workflow following the CRISP-DM methodology.

## Problem Statement
Boston’s housing authority and urban developers face the challenge of accurately estimating property values across different neighborhoods. Property valuation depends on multiple interrelated factors—such as crime rate, accessibility to major roads, environmental quality, and local amenities—which can be difficult to model using traditional statistical techniques alone.

\begin{tcolorbox}[title=This project aims to answer the following key questions:]

1. Which socioeconomic and environmental factors most strongly influence housing prices in the Boston area?

2. How can predictive modeling improve the estimation of housing values compared to conventional assessment methods?

3. Can machine learning models such as XGBoost enhance prediction accuracy and interpretability for policy and investment use?
\end{tcolorbox}

## Success Criteria
To determine the success of this project, both predictive and business metrics are defined:

* Predictive Success:
  * Achieve R² >= 0.80 and RMSE <= 3.0 on the test dataset.
  * Ensure generalization through cross-validation and avoid overfitting.
  * Compare performance across regression techniques and select the most robust model.

* Business Success:
  * Identify the top five predictors of housing value to support policy and investment strategies.
  * Deliver interpretable insights for urban planners and real estate analysts to optimize housing development and pricing strategies.
  * Provide a scalable and reproducible model pipeline for future data integration or policy forecasting.

\newpage

# Data Understanding
## Data Collection
The dataset used in this analysis is the Boston Housing Dataset, which contains information about various attributes of houses in Boston suburbs. The dataset is publicly available and can be accessed through the `MASS` package in R.
```{r load-data}
data("Boston", package = "MASS")
boston.df <- as_tibble(Boston) |>
  clean_names()

head(boston.df)
```

## Data Description
The dataset used in this project is the Boston Housing Dataset, originally published in the Harrison and Rubinfeld (1978) study and included in the MASS package in R. It contains 506 observations and 14 variables describing socioeconomic, demographic, environmental, and structural characteristics of housing in Boston suburbs. The dataset is commonly used for predictive modeling and regression analysis tasks, particularly for estimating housing values.

Each record represents a census tract in the Boston metropolitan area, with the target variable being the median value of owner-occupied homes (MEDV) expressed in $1000s.

The features cover a wide range of factors that influence property values — including crime rates, industrial activity, environmental quality, accessibility to major roads, and education levels. These variables provide a multi-dimensional view of the housing environment, making the dataset suitable for developing regression and machine learning models to predict housing prices.

## Data Dictionary

| Variable | Description                        | Data Type | Constraints/Rule |
|:---------|:-----------------------------------|:----------|:-----------------|
| **crim** | Per capita crime rate by town | Numeric | >= 0 |
| **zn**  | Proportion of residential land zoned for lots over 25,000 sq.ft. | Numeric | 0 <= **zn** <= 100 |
| **indus** | Proportion of non-retail business acres per town | Numeric | >= 0 |
| **chas** | Charles River dummy variable (1 if tract bounds river; 0 otherwise) | Integer | 0 or 1 |
| **nox** | Nitric oxides concentration (parts per 10 million) | Numeric | 0 < **nox** <= 1 |
| **rm** | Average number of rooms per dwelling | Numeric | > 0 |
| **age** | Proportion of owner-occupied units built prior to 1940 (%) | Numeric | 0 <= **age** <= 100 |
| **dis** | Weighted distances to five Boston employment centers | Numeric | > 0 |
| **rad** | Index of accessibility to radial highways | Integer | 1–24 |
| **tax** | Full-value property-tax rate per $10,000 | Numeric | > 0 |
| **ptratio** | Pupil-teacher ratio by town | Numeric | > 0 |
| **black** | (1000(Bk - 0.63)^2), where Bk is the proportion of Black residents by town | Numeric | >= 0 |
| **lstat** | Percentage of lower status of the population | Numeric | 0 <= **lstat** <= 100 |
| **medv** | Median value of owner-occupied homes in $1000s (Target variable) | Numeric | > 0 (typically capped at 50 in dataset) |


## Key Observations
* The dataset does not contain missing values, making it well-suited for direct modeling.
* Some predictors (e.g., CRIM, LSTAT, RM) exhibit skewness that may require transformation.
* The target variable (MEDV) is continuous and typically ranges between $5,000 and $50,000, with values above 50 capped in the dataset.
* There is potential multicollinearity between some predictors (e.g., RAD and TAX), which will be explored during modeling and addressed using dimensionality reduction or regularization techniques.

## Initial Data Exploration
### Basic coercions for exploration
```{r}
boston.df <- boston.df |>
  mutate(chas = factor(chas, levels = c(0, 1),
                       labels = c("No", "Yes")),
         rad = as.integer(rad))

glimpse(boston.df)
```

### High-level summary
```{r}
skim(boston.df)
summary(boston.df)
```

### Univariate analysis
**Skewness table**
```{r}
numeric_vars <- boston.df |> select_if(is.numeric) |> names()

skewness_values <- boston.df |>
  summarize(across(all_of(numeric_vars), ~ e1071::skewness(.))) |>
  pivot_longer(everything(), names_to = "Variable", values_to = "Skewness") |>
  arrange(desc(abs(Skewness)))

kable(skewness_values, digit=2, caption = "Skewness of numeric variables")
```
**Histograms of numeric variables**
```{r}
boston.df |>
  pivot_longer(cols = all_of(numeric_vars)) |>
  ggplot(aes(value)) +
  geom_histogram(bins = 30, fill = "steelblue", color = "white") +
  facet_wrap(~ name, scales = "free", ncol=5) +
  labs(title = "Histograms of Numeric Variables",
       x = NULL, y = "Count")
```

### Bivariate analysis
**Correlation matrix for numeric variables**
```{r}

```


\newpage

# Data Preparation
## Handle missing data

## Transform skewed data

## Encode categorical variables

## Feature scaling

## Split the data




\newpage

# Modeling
## Multiple Linear Regression

## Principal Component Regression (PCR)

## XGBoost Regressor


\newpage

# Evaluation



\newpage

# Deployment



\newpage

# Conclusion



# References



